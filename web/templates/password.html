<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <link rel="shortcut icon" href="../static/images/logo.png">
    <link rel="stylesheet" href="../static/style.css">

    <style>
        .change-password-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 90vh;
        }

        .change-password-container form {
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: var(--border-radius-2);
            padding: 3.5rem;
            background-color: var(--color-white);
            box-shadow: var(--box-shadow);
            width: 95%;
            max-width: 32rem;
        }

        .change-password-container form:hover {
            box-shadow: 3px 3px 3px 3px grey;
        }

        .change-password-container form .form-input {
            width: 100%;
        }

        .change-password-container form .box {
            padding: .5rem 0;
        }

        .change-password-container form .box p {
            line-height: 2;
        }

        .change-password-container form h2+p {
            margin: .4rem 0 1.2rem 0;
        }

        .btn {
            background: none;
            border: none;
            border: 2px solid var(--color-primary) !important;
            border-radius: var(--border-radius-1);
            padding: .5rem 1rem;
            color: var(--color-white);
            background-color: var(--color-primary);
            cursor: pointer;
            margin: 1rem 1.5rem 1rem 0;
            margin-top: 1.5rem;
        }

        .btn:hover {
            color: var(--color-primary);
            background-color: transparent;
        }
    </style>

</head>

<body>
    <header>
        <div class="logo" title="Secure File Box">
            <a href="/index" class="logo-link">
                <img src="../static/images/logo.png" alt="Logo">
                <h2>Secure <span class="danger">Box</span></h2>
            </a>
        </div>

        <div class="navbar">
            <a href="/index">
                <span class="material-icons-sharp">lock</span>
                <h3>Vault</h3>
            </a>
            <a href="/settings">
                <span class="material-icons-sharp">settings</span>
                <h3>Settings</h3>
            </a>
            <a href="/password" class="active">
                <span class="material-icons-sharp">password</span>
                <h3>Password</h3>
            </a>
            <button class="Btn" onclick="logout()">
                <div class="sign">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="white" d="M502.6 278.6l-160 160c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L401.4 288H192c-13.3 0-24-10.7-24-24s10.7-24 24-24h209.4L308.7 107.3c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l160 160c9.5 9.4 9.5 24.6 0 35.2zM160 96H96c-17.7 0-32 14.3-32 32v256c0 17.7 14.3 32 32 32h64c17.7 0 32 14.3 32 32s-14.3 32-32 32H96c-53 0-96-43-96-96V128C0 75 43 32 96 32h64c17.7 0 32 14.3 32 32s-14.3 32-32 32z" />
                    </svg>
                </div>
                <div class="text">Logout</div>
            </button>
        </div>

        <div id="profile-btn">
            <span class="material-icons-sharp">person</span>
        </div>
        <div class="theme-toggler">
            <span class="material-icons-sharp active">light_mode</span>
            <span class="material-icons-sharp">dark_mode</span>
        </div>
    </header>


    <div class="change-password-container">
        <form id="changePasswordForm" action="">
            <h2>Create new password</h2>
            <p class="text-muted">Your new password must be different from previous used passwords.</p>
            <div class="box">
                <p class="text-muted">Email</p>
                <input type="email" id="email" class="form-input" autocomplete="username">
            </div>
            <div class="box">
                <p class="text-muted">Current Password</p>
                <input type="password" id="currentpass" class="form-input" autocomplete="current-password">
            </div>
            <div class="box">
                <p class="text-muted">New Password</p>
                <input type="password" id="newpass" class="form-input" autocomplete="new-password">
            </div>
            <div class="box">
                <p class="text-muted">Confirm Password</p>
                <input type="password" id="confirmpass" class="form-input" autocomplete="new-password">
            </div>
            <div class="button">
                <button type="button" id="changePasswordBtn" class="btn" onclick="changePassword()">Save</button>
                <a href="/index" class="text-muted">Cancel</a>
            </div>
            <p id="passwordResult" class="text-muted"></p>
            <a href="#">
                <p>Forget password?</p>
            </a>
        </form>
    </div>

</body>

<script src="../static/app.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('changePasswordForm');
        const btn = document.getElementById('changePasswordBtn');
        const trigger = () => {
            if (typeof changePassword === 'function') {
                changePassword();
            }
        };
        if (form) {
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                trigger();
            });
        }
        if (btn) {
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                trigger();
            });
        }
    });
</script>

</html>
